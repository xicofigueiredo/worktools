<div class="card border-0 shadow-sm mb-4">
  <div class="card-header bg-white border-bottom-0 pt-4 px-4 d-flex justify-content-between align-items-center">
    <h5 class="mb-0"><i class="fa-solid fa-bolt-lightning text-warning me-2"></i>Action Center</h5>
    <span class="badge rounded-pill bg-primary-soft text-primary">
      <%= manager_pending.count %> Pending Actions
    </span>
  </div>

  <div class="card-body px-4 pb-4">
    <div class="list-group list-group-flush">
      <% manager_pending.each do |conf| %>
        <div id="action-row-<%= conf.id %>" class="list-group-item px-0 py-3 border-light">
          <div class="d-flex justify-content-between align-items-start">
            <div class="me-3">
              <div class="mb-1">
                <span class="text-dark">
                  <%= conf.confirmable.description_for_approver %>
                </span>
              </div>
              <div class="small text-muted d-flex align-items-center">
                <i class="fa-regular fa-clock me-1"></i>
                <%= time_ago_in_words(conf.created_at) %> ago
                <button class="btn btn-link btn-sm text-decoration-none p-0 ms-3"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#desc-<%= conf.id %>">
                  View Reason
                </button>
              </div>
            </div>

            <div class="d-flex gap-2">
              <%= button_to approve_confirmation_path(conf), method: :post, class: "btn btn-sm btn-success px-3 rounded-pill" do %>
                <i class="fa-solid fa-check me-1"></i> Approve
              <% end %>
              <button type="button"
                      class="btn btn-sm btn-outline-danger px-3 rounded-pill"
                      data-action="click->confirmation#openRejectModal"
                      data-url="<%= reject_confirmation_path(conf) %>">
                <i class="fa-solid fa-xmark"></i> Reject
              </button>
            </div>
          </div>

          <div class="collapse mt-2" id="desc-<%= conf.id %>">
            <div class="p-3 bg-light rounded-3 small">
              <strong class="text-uppercase tiny text-muted d-block mb-1">Requester's Note:</strong>
              <%= conf.confirmable.reason %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
