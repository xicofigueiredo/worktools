<%= form_with(model: @kda, local: true) do |form| %>
  <% if @kda.errors.any? %>
    <div class="alert alert-danger">
      <h4>Could not save KDA:</h4>
      <ul>
        <% @kda.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <h2 class="card-title text-center mb-4">New KDA</h2>
            <div class="col-md-3">
            <%= form.collection_select :week_id, @available_weeks, :id, :name, { include_blank: "Please Select" }, { class: "form-control", selected: @kda.week_id } %>
            </div>
            <hr>
            <table class="table">
              <thead>
                <tr>
                  <th>How well did you do, last week?	</th>
                  <th>Rating (0-5)</th>
                  <th>Why did you give yourself that rating? Provide two arguments.</th>
                  <th>How will you improve in each KDA, during this week? Give two strategies.</th>
                </tr>
              </thead>
              <tbody>
                <%= form.fields_for :sdl do |sdl_fields| %>
                  <tr>
                    <td>Self-Directed Learning</td>
                    <td><%= sdl_fields.number_field :rating, min: 0, max: 5, class: "form-control" %></td>
                    <td><%= sdl_fields.text_area :why, rows: 6, class: "form-control" %></td>
                    <td><%= sdl_fields.text_area :improve, rows: 6, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :ini do |ini_fields| %>
                  <tr>
                    <td>Initiative</td>
                    <td><%= ini_fields.number_field :rating, min: 0, max: 5, class: "form-control" %></td>
                    <td><%= ini_fields.text_area :why, rows: 6, class: "form-control" %></td>
                    <td><%= ini_fields.text_area :improve, rows: 6, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :mot do |mot_fields| %>
                  <tr>
                    <td>Motivation</td>
                    <td><%= mot_fields.number_field :rating, min: 0, max: 5, class: "form-control" %></td>
                    <td><%= mot_fields.text_area :why, rows: 6, class: "form-control" %></td>
                    <td><%= mot_fields.text_area :improve, rows: 6, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :p2p do |p2p_fields| %>
                  <tr>
                    <td>P2P</td>
                    <td><%= p2p_fields.number_field :rating, min: 0, max: 5, class: "form-control" %></td>
                    <td><%= p2p_fields.text_area :why, rows: 6, class: "form-control" %></td>
                    <td><%= p2p_fields.text_area :improve, rows: 6, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :hubp do |hubp_fields| %>
                  <tr>
                    <td>Hub Participation</td>
                    <td><%= hubp_fields.number_field :rating, min: 0, max: 5, class: "form-control" %></td>
                    <td><%= hubp_fields.text_area :why, rows: 6, class: "form-control" %></td>
                    <td><%= hubp_fields.text_area :improve, rows: 6, class: "form-control" %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
            <div class="actions">
              <%= form.submit "Save KDA", class: "btn btn-primary" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>
