<%= form_with(model: @kda, local: true) do |form| %>
  <% if @kda.errors.any? %>
    <div class="alert alert-danger">
      <h4>Could not save KDA:</h4>
      <ul>
        <% @kda.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <div class="row justify-content-center">
      <div class="col-md-12">
        <div class="card mb-5" style="border-radius: 10px;">
          <div class="card-body py-0">
            <table class="table">
              <thead>
                <tr>
                  <th class="pt-3" style="font-size: 13px;">How well did you do, last week?	</th>
                  <th style="font-size: 13px;">Rating (0-5)</th>
                  <th style="font-size: 13px;">Why did you give yourself that rating? Provide two arguments.</th>
                  <th style="font-size: 13px;">How will you improve in each KDA, during this week? Give two strategies.</th>
                </tr>
              </thead>
              <tbody>
                <%= form.hidden_field :week_id, value: @current_week.id %>
                <%= form.fields_for :sdl do |sdl_fields| %>
                  <tr>
                    <td title="Are you able to learn independently? This KDA refers to your ability to set your learning goals, assign deadlines, and complete them, whether the goals are academic in nature or not. From an academic perspective this relates to the BGA Moodle platform and its subjects; are you keeping up with your deadlines and setting effective goals each week and adhering to them.">Self-Directed Learning <i class="fa-regular fa-circle-question"></i></td>
                    <td>
                      <div class="shadow-sm" style="border-radius: 10px;">
                        <%= sdl_fields.select :rating, options_for_select(0..5, sdl_fields.object.rating), {}, { class: "form-control text-center", required: true, style: "border-radius: 10px" } %>
                      </div>
                    </td>
                    <td><%= sdl_fields.text_area :why, rows: 3, class: "form-control" %></td>
                    <td><%= sdl_fields.text_area :improve, rows: 3, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :ini do |ini_fields| %>
                  <tr>
                    <td>Initiative <i class="fa-regular fa-circle-question" title="Are you trying any new things? Or taking on any new challenges. This area is related to trying to get out of your comfort zone and try new activities/courses to see if these are things you might be interested in! This KDA is key to Learners discovering their passions, and how to pursue them."></i></td>
                    <td>
                      <div class="shadow-sm" style="border-radius: 10px;">
                        <%= ini_fields.select :rating, options_for_select(0..5, ini_fields.object.rating), {}, { class: "form-control text-center", required: true, style: "border-radius: 10px" } %>
                      </div>
                    </td>
                    <td><%= ini_fields.text_area :why, rows: 3, class: "form-control" %></td>
                    <td><%= ini_fields.text_area :improve, rows: 3, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :mot do |mot_fields| %>
                  <tr>
                    <td>Motivation <i class="fa-regular fa-circle-question" title="Are you approaching your learning with motivation, and trying to complete your goals to the best of your ability? Are your pushing yourself and trying your best in the challenges that you encounter? Are you persevering, and not dropping new courses or activities too soon?" ></i></td>
                    <td>
                      <div class="shadow-sm" style="border-radius: 10px;">
                        <%= mot_fields.select :rating, options_for_select(0..5, mot_fields.object.rating), {}, { class: "form-control text-center", required: true, style: "border-radius: 10px" } %>
                      </div>
                    </td>
                    <td><%= mot_fields.text_area :why, rows: 3, class: "form-control" %></td>
                    <td><%= mot_fields.text_area :improve, rows: 3, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :p2p do |p2p_fields| %>
                  <tr>
                    <td>P2P <i class="fa-regular fa-circle-question" title="This section refers to learning: are you helping others with their courses and learning? Are you asking for help from other learners as opposed to the Learning Coach?
This would also refer to participation on the Forum for the BGA online courses."></i> </td>
                    <td>
                      <div class="shadow-sm" style="border-radius: 10px;">
                        <%= p2p_fields.select :rating, options_for_select(0..5, p2p_fields.object.rating), {}, { class: "form-control text-center", required: true, style: "border-radius: 10px" } %>
                      </div>
                    </td>
                    <td><%= p2p_fields.text_area :why, rows: 3, class: "form-control" %></td>
                    <td><%= p2p_fields.text_area :improve, rows: 3, class: "form-control" %></td>
                  </tr>
                <% end %>
                <%= form.fields_for :hubp do |hubp_fields| %>
                  <tr>
                    <td title="Are you participating in the Hub activities? Are you contributing to any projects or events that are being run in their Hub? And are you helping to contribute to the Hub being a safe and clean environment for other learners? This KDA relates to respect of fellow peers and of the educational space." >Hub Participation <i class="fa-regular fa-circle-question"></i></td>
                    <td>
                      <div class="shadow-sm" style="border-radius: 10px;">
                        <%= hubp_fields.select :rating, options_for_select(0..5, hubp_fields.object.rating), {}, { class: "form-control text-center", required: true, style: "border-radius: 10px" } %>
                      </div>
                    </td>
                    <td><%= hubp_fields.text_area :why, rows: 3, class: "form-control" %></td>
                    <td><%= hubp_fields.text_area :improve, rows: 3, class: "form-control" %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
        <div class="d-flex justify-content-center  gap-2 mt-3 mb-3">
          <%= link_to "Back", kdas_path(date: @kda.week.start_date), class: "btn btn-secondary", style: 'border-radius: 10px;' %>
          <%= form.submit "Save KDA", class: "btn btn-primary", style: 'border-radius: 10px;' %>
        </div>
      </div>
    </div>
  </div>
<% end %>
